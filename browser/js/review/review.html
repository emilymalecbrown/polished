<div>

  <div class="add-review" ng-if="isLoggedIn()">
    <h4>Add Review</h4>
    <div class="card-panel">
      <span>
      <form>
        <ul class="rating">
            <li ng-repeat="n in [].constructor(maxRating) track by $index">
                <span ng-click="rateBy($index+1)" ng-show="ratedBy > $index" class="filled">&#9733;</span>
                <span ng-click="rateBy($index+1)" ng-show="ratedBy <= $index">&#9733;</span>
            </li>
        </ul>

        <div class="input-field col s12">
          <textarea ng-model="review.text" id="textarea1" class="materialize-textarea"></textarea>
          <label for="textarea1" em>Comments</label>
        </div>

        <button class="btn waves-effect waves-light" type="submit" name="action" ng-disabled="!review.text" ng-click="addReview(product.id, review)">
          Submit<i class="material-icons right">send</i>
        </button>
      </form>
      </span>
    </div>
  </div>

  <h4>Reviews</h4>

  <div ng-repeat="review in product.reviews">
    <div class="card-panel white">
      <p>
        <i ng-repeat="l in starString(review.stars)" class="material-icons star">star</i>
      </p>
      <br>
      <p>{{review.text}}</p>
    </div>
  </div>

</div>
